-- [할인 데이터 입력 - 변경된 테이블 구조 반영]
-- target_id: 상품 ID (prod_id)
-- val: 할인율 (%)
-- is_active: 1 (활성)

SET DEFINE OFF;

-- 1. [MEN] 펄사 트레일 프로 (10% 할인)
-- prod_id를 정확히 알 수 없으므로 서브쿼리로 찾아서 입력
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '신상 10% 할인', 'PERCENT', 10, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '펄사 트레일 프로 S/LAB';

-- 2. [MEN] 센스 라이드 (20% 할인)
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '시즌 오프 20%', 'PERCENT', 20, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '센스 라이드 5';

-- 3. [MEN] 에어로 글라이드 (5% 할인)
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '반짝 세일 5%', 'PERCENT', 5, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '에어로 글라이드';

-- 4. [WOMEN] 스피드크로스 (15% 할인)
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '여성 트레일 특가', 'PERCENT', 15, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '스피드크로스 6 W';

-- 5. [WOMEN] 스펙터 (5% 할인)
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '로드러닝 프로모션', 'PERCENT', 5, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '스펙터 W';

-- 6. [SPORTSTYLE] 스피드벌스 (30% 할인)
INSERT INTO DISCOUNTS (discount_id, discount_name, type, val, target_type, target_id, start_date, end_date, is_active)
SELECT discount_seq.NEXTVAL, '클리어런스 30%', 'PERCENT', 30, 'PRODUCT', prod_id, SYSDATE-1, SYSDATE+30, 1
FROM PRODUCTS WHERE prod_name = '스피드벌스 PRG';

COMMIT;