-- -----------------------------------------------------------------
-- [Maknaez] Oracle DB DDL Script 
-- - Project: Maknaez[DoubleDragon Semi Project]
-- - DB: Oracle DBMS
-- - 작성일: 2026-01-12
-- - 마지막 수정일 : 2026-01-19
-- -----------------------------------------------------------------
/* -- -----------------------------------------------------------------
   0. 초기화 (기존 객체 삭제) - 필요 시 주석 해제 후 실행
-- ----------------------------------------------------------------- */
/*
-- 시퀀스 삭제 (알파벳순)
DROP SEQUENCE ADDR_SEQ;
DROP SEQUENCE BOARD_SEQ;
DROP SEQUENCE CART_SEQ;
DROP SEQUENCE CLAIM_SEQ;
DROP SEQUENCE DELIVERY_SEQ;
DROP SEQUENCE DISCOUNT_SEQ;
DROP SEQUENCE FAQ_SEQ;
DROP SEQUENCE IMG_SEQ;
DROP SEQUENCE INQUIRY_SEQ;
DROP SEQUENCE ITEM_SEQ;
DROP SEQUENCE LOGINLOG_SEQ;
DROP SEQUENCE MEMBER_SEQ;
DROP SEQUENCE NOTICE_SEQ;
DROP SEQUENCE OD_SEQ;
DROP SEQUENCE OPT_SEQ;
DROP SEQUENCE PAY_SEQ;
DROP SEQUENCE PM_SEQ;
DROP SEQUENCE POST_SEQ;
DROP SEQUENCE PRODUCT_SEQ;
DROP SEQUENCE QNA_SEQ;
DROP SEQUENCE STOCK_SEQ;
DROP SEQUENCE WISH_SEQ;

-- 테이블 삭제 (FK 의존성 고려: 자식 -> 부모 순서)
DROP TABLE REVIEWS CASCADE CONSTRAINTS;
DROP TABLE POINT_MEMBER CASCADE CONSTRAINTS;
DROP TABLE ORDER_DISCOUNTS CASCADE CONSTRAINTS;
DROP TABLE DISCOUNTS CASCADE CONSTRAINTS;
DROP TABLE WISHLIST CASCADE CONSTRAINTS;
DROP TABLE CART CASCADE CONSTRAINTS;
DROP TABLE CLAIMS CASCADE CONSTRAINTS;
DROP TABLE PAYMENTS CASCADE CONSTRAINTS;
DROP TABLE ORDER_ITEMS CASCADE CONSTRAINTS;
DROP TABLE ORDERS CASCADE CONSTRAINTS;
DROP TABLE STOCK_LOGS CASCADE CONSTRAINTS;
DROP TABLE PRODUCT_IMG CASCADE CONSTRAINTS;
DROP TABLE PD_SIZE CASCADE CONSTRAINTS;
DROP TABLE PRODUCTS CASCADE CONSTRAINTS;
DROP TABLE CATEGORY CASCADE CONSTRAINTS;
DROP TABLE QNA_ADMIN CASCADE CONSTRAINTS;
DROP TABLE QNA_ANSWER CASCADE CONSTRAINTS;
DROP TABLE INQUIRY CASCADE CONSTRAINTS;
DROP TABLE FAQ CASCADE CONSTRAINTS;
DROP TABLE NOTICE CASCADE CONSTRAINTS;
DROP TABLE BOARD_POSTS CASCADE CONSTRAINTS;
DROP TABLE BOARD CASCADE CONSTRAINTS;
DROP TABLE SHIPMENTS CASCADE CONSTRAINTS;
DROP TABLE LOGIN_HISTORY CASCADE CONSTRAINTS;
DROP TABLE ADDRESS CASCADE CONSTRAINTS;
DROP TABLE MEMBER3 CASCADE CONSTRAINTS;
DROP TABLE MEMBER2 CASCADE CONSTRAINTS;
DROP TABLE MEMBER1 CASCADE CONSTRAINTS;
*/

/* -- -----------------------------------------------------------------
   1. 시퀀스 생성 (알파벳순 정렬)
-- ----------------------------------------------------------------- */
CREATE SEQUENCE ADDR_SEQ        START WITH 1 INCREMENT BY 1 NOCACHE; -- [ADDRESS]
CREATE SEQUENCE BOARD_SEQ       START WITH 1 INCREMENT BY 1 NOCACHE; -- [BOARD]
CREATE SEQUENCE CART_SEQ        START WITH 1 INCREMENT BY 1 NOCACHE; -- [CART]
CREATE SEQUENCE CLAIM_SEQ       START WITH 1 INCREMENT BY 1 NOCACHE; -- [CLAIMS]
CREATE SEQUENCE DELIVERY_SEQ    START WITH 1 INCREMENT BY 1 NOCACHE; -- [SHIPMENTS]
CREATE SEQUENCE DISCOUNT_SEQ    START WITH 1 INCREMENT BY 1 NOCACHE; -- [DISCOUNTS]
CREATE SEQUENCE FAQ_SEQ         START WITH 1 INCREMENT BY 1 NOCACHE; -- [FAQ]
CREATE SEQUENCE IMG_SEQ         START WITH 1 INCREMENT BY 1 NOCACHE; -- [PRODUCT_IMG]
CREATE SEQUENCE INQUIRY_SEQ     START WITH 1 INCREMENT BY 1 NOCACHE; -- [INQUIRY]
CREATE SEQUENCE ITEM_SEQ        START WITH 1 INCREMENT BY 1 NOCACHE; -- [ORDER_ITEMS]
CREATE SEQUENCE LOGINLOG_SEQ    START WITH 1 INCREMENT BY 1 NOCACHE; -- [LOGIN_HISTORY]
CREATE SEQUENCE MEMBER_SEQ      START WITH 1 INCREMENT BY 1 NOCACHE; -- [MEMBER1]
CREATE SEQUENCE NOTICE_SEQ      START WITH 1 INCREMENT BY 1 NOCACHE; -- [NOTICE]
CREATE SEQUENCE OD_SEQ          START WITH 1 INCREMENT BY 1 NOCACHE; -- [ORDER_DISCOUNTS]
CREATE SEQUENCE OPT_SEQ         START WITH 1 INCREMENT BY 1 NOCACHE; -- [PD_SIZE]
CREATE SEQUENCE PAY_SEQ         START WITH 1 INCREMENT BY 1 NOCACHE; -- [PAYMENTS]
CREATE SEQUENCE PM_SEQ          START WITH 1 INCREMENT BY 1 NOCACHE; -- [POINT_MEMBER]
CREATE SEQUENCE POST_SEQ        START WITH 1 INCREMENT BY 1 NOCACHE; -- [BOARD_POSTS]
CREATE SEQUENCE PRODUCT_SEQ     START WITH 1 INCREMENT BY 1 NOCACHE; -- [PRODUCTS]
CREATE SEQUENCE QNA_SEQ         START WITH 1 INCREMENT BY 1 NOCACHE; -- [QNA_ANSWER]
CREATE SEQUENCE STOCK_SEQ       START WITH 1 INCREMENT BY 1 NOCACHE; -- [STOCK_LOGS]
CREATE SEQUENCE WISH_SEQ        START WITH 1 INCREMENT BY 1 NOCACHE; -- [WISHLIST]

/* -- -----------------------------------------------------------------
   2. 테이블 생성
   (논리적 순서 유지: 회원 > 상품 > 주문 > 게시판 > 기타)
-- ----------------------------------------------------------------- */

-- 1. 회원 기본 정보
CREATE TABLE MEMBER1 (
    MEMBERIDX       NUMBER          NOT NULL,           -- PK
    NICKNAME        VARCHAR2(50)    NOT NULL UNIQUE,
    USERID          VARCHAR2(50)    NOT NULL UNIQUE,    -- 로그인 ID
    USERPWD         VARCHAR2(20)    NOT NULL,           -- 비밀번호
    USERLEVEL       NUMBER          NOT NULL,           -- 등급 (10~99)
    ENABLED         NUMBER          NOT NULL,           -- 상태 (0:삭제, 1:활성)
    MODIFY_DATE     DATE            NOT NULL,           -- 수정일
    BIRTH           DATE            NOT NULL,           -- 생일
    GENDER          NUMBER          NULL                -- 성별 (0:남, 1:여)
);

-- 2. 회원 부가 정보
CREATE TABLE MEMBER2 (
    MEMBERIDX       NUMBER          NOT NULL,           -- PK, FK (MEMBER1)
    USERNAME        VARCHAR2(100)   NULL,
    EMAIL           VARCHAR2(100)   NULL,
    TEL             VARCHAR2(20)    NULL
);

-- 3. 회원 이력/상태
CREATE TABLE MEMBER3 (
    MEMBERIDX       NUMBER          NOT NULL,           -- PK, FK (MEMBER1)
    REGISTER_DATE   DATE            NULL,               -- 가입일
    WITHDRAW_DATE   DATE            NULL,               -- 탈퇴일
    WITHDRAW_REASON VARCHAR2(255)   NULL                -- 탈퇴 사유
);

-- 4. 배송지 관리
CREATE TABLE ADDRESS (
    ADDR_ID         NUMBER          NOT NULL,           -- PK
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    ADDR_NAME       VARCHAR2(50)    NULL,               -- 배송지명
    RECEIVER_NAME   VARCHAR2(100)   NULL,               -- 수령인
    RECEIVER_TEL    VARCHAR2(20)    NULL,               -- 연락처
    ZIP_CODE        VARCHAR2(10)    NULL,               -- 우편번호
    ADDR1           VARCHAR2(100)   NULL,               -- 주소1
    ADDR2           VARCHAR2(100)   NULL,               -- 주소2 (상세)
    ISBASIC         NUMBER(1)       NULL                -- 기본배송지 여부(1:기본)
);

-- 5. 로그인 이력
CREATE TABLE LOGIN_HISTORY (
    LOG_ID          VARCHAR2(20)    NOT NULL,           -- PK
    LOG_DATE        DATE            NULL,               -- 로그인 일시
    IP_INFO         VARCHAR2(40)    NULL,               -- 접속 IP
    MEMBERIDX       NUMBER          NOT NULL            -- FK (MEMBER1)
);

-- 6. 게시판 (통합형/레거시 - BOARD)
CREATE TABLE BOARD (
    NUM                 NUMBER          NOT NULL,       -- PK
    USERID              VARCHAR2(50)    NOT NULL,       -- 작성자 ID (FK -> MEMBER1.USERID)
    USERNAME            VARCHAR2(50)    NULL,
    SUBJECT             VARCHAR2(255)   NOT NULL,       -- 제목
    CONTENT             CLOB            NOT NULL,       -- 내용
    REG_DATE            DATE            DEFAULT SYSDATE,
    HITCOUNT            NUMBER          DEFAULT 0,      -- 조회수
    SAVEFILENAME        VARCHAR2(100)   NULL,
    ORIGINALFILENAME    VARCHAR2(100)   NULL,
    REPLYCONTENT        VARCHAR2(4000)  NULL,           -- 답변
    REPLYDATE           DATE            NULL,
    REPLYID             VARCHAR2(50)    NULL
);

-- 7. 게시판 포스트 (신규 구조 - BOARD_POSTS)
CREATE TABLE BOARD_POSTS (
    POST_ID         NUMBER          NOT NULL,           -- PK
    BOARD_TYPE      VARCHAR2(20)    NULL,               -- 타입 (notice, free)
    TITLE           VARCHAR2(50)    NULL,               -- 제목
    CONTENT         VARCHAR2(255)   NULL,               -- 내용
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    REG_DATE        DATE            NULL,
    MODIFY_DATE     DATE            NULL,
    VIEWS           NUMBER          NULL,
    THUMBS_UP       NUMBER          NULL,
    ISFIXED         NUMBER          NULL                -- 상단고정
);

-- 8. 공지사항 (전용 테이블 - NOTICE)
CREATE TABLE NOTICE (
    NUM                 NUMBER          NOT NULL,       -- PK
    USERNAME            VARCHAR2(50)    NOT NULL,
    SUBJECT             VARCHAR2(300)   NOT NULL,
    CONTENT             VARCHAR2(4000)  NOT NULL,
    REG_DATE            DATE            DEFAULT SYSDATE,
    HITCOUNT            NUMBER          DEFAULT 0,
    SAVEFILENAME        VARCHAR2(100)   NULL,
    ORIGINALFILENAME    VARCHAR2(100)   NULL,
    ISNOTICE            NUMBER(1)       DEFAULT 0,
    ISSHOW              NUMBER(1)       DEFAULT 1       -- 공개여부
);

-- 9. FAQ
CREATE TABLE FAQ (
    NUM             NUMBER          NOT NULL,           -- PK
    CATEGORY        VARCHAR2(50)    NOT NULL,
    SUBJECT         VARCHAR2(300)   NOT NULL,
    CONTENT         VARCHAR2(4000)  NOT NULL,
    REG_DATE        DATE            DEFAULT SYSDATE
);

-- 10. 1:1 문의 (신규 구조 - INQUIRY)
CREATE TABLE INQUIRY (
    ID              NUMBER          NOT NULL,           -- PK
    USER_ID         VARCHAR2(50)    NOT NULL,
    SUBJECT         VARCHAR2(200)   NOT NULL,
    CONTENT         CLOB            NOT NULL,
    CATEGORY        VARCHAR2(50)    NULL,
    STATUS          VARCHAR2(20)    DEFAULT 'WAITING',
    CREATED_AT      TIMESTAMP(6)    DEFAULT CURRENT_TIMESTAMP,
    ANSWER          CLOB            NULL
);

-- 11. 1:1 문의 (레거시 구조 - QNA_ANSWER)
CREATE TABLE QNA_ANSWER (
    QNA_ID          NUMBER          NOT NULL,           -- PK
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    TYPE            VARCHAR2(10)    NULL,
    TITLE           VARCHAR2(50)    NULL,
    CONTENT         VARCHAR2(150)   NULL,
    ANSWER_DATE     DATE            NULL
);

-- 12. 1:1 문의 답변 (레거시 구조 - QNA_ADMIN)
CREATE TABLE QNA_ADMIN (
    QNA_ID          NUMBER          NOT NULL,           -- PK, FK (QNA_ANSWER)
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    ANSWER_TXT      VARCHAR2(150)   NULL,
    ANSWERED_DATE   DATE            NULL
);

-- 13. 카테고리
CREATE TABLE CATEGORY (
    CATE_CODE       VARCHAR2(50)    NOT NULL,           -- PK
    CATE_NAME       VARCHAR2(100)   NOT NULL,
    CATE_PARENT     VARCHAR2(50)    NULL,               -- FK (Self)
    DEPTH           NUMBER(1)       NULL,
    STATUS          NUMBER          NULL,
    ORDER_NO        NUMBER          NULL
);

-- 14. 상품 마스터
CREATE TABLE PRODUCTS (
    PROD_ID         NUMBER          NOT NULL,           -- PK
    CATE_CODE       VARCHAR2(100)   NOT NULL,           -- FK (CATEGORY)
    PROD_NAME       VARCHAR2(200)   NULL,
    PROD_DESC       CLOB            NULL,               -- 상세설명
    BASE_PRICE      NUMBER          NULL,
    IS_DISPLAYED    NUMBER          NULL,               -- 진열여부
    THUMB_NAIL      VARCHAR2(255)   NULL,
    PROD_DATE       DATE            NULL,
    SHIPPED_DATE    DATE            NULL,
    STATUS          NUMBER(1)       DEFAULT 1
);

-- 15. 상품 옵션 (사이즈)
CREATE TABLE PD_SIZE (
    OPT_ID          NUMBER          NOT NULL,           -- PK
    PROD_ID         NUMBER          NOT NULL,           -- FK (PRODUCTS)
    PD_SIZE         VARCHAR2(50)    NULL
);

-- 16. 상품 이미지
CREATE TABLE PRODUCT_IMG (
    IMG_ID          NUMBER          NOT NULL,           -- PK
    PROD_ID         NUMBER          NOT NULL,           -- FK (PRODUCTS)
    IMG             VARCHAR2(4000)  NULL
);

-- 17. 재고 로그
CREATE TABLE STOCK_LOGS (
    LOG_ID          NUMBER          NOT NULL,           -- PK
    PROD_ID         NUMBER          NOT NULL,           -- FK (PRODUCTS)
    OPT_ID          NUMBER          NOT NULL,           -- FK (PD_SIZE)
    CHANGE_TYPE     VARCHAR2(50)    NULL,
    CHANGE_QTY      NUMBER          NULL,
    REG_DATE        DATE            NULL,
    PROD_STOCK      NUMBER          NOT NULL
);

-- 18. 배송 정보
CREATE TABLE SHIPMENTS (
    DELIVERY_NUMBER     NUMBER          NOT NULL,       -- PK
    ADDR_ID             NUMBER          NOT NULL,       -- FK (ADDRESS)
    DELIVERY_NAME       VARCHAR2(50)    NULL,
    DELIVERY_TEL        VARCHAR2(50)    NULL,
    DELIVERY_PERSONNAME VARCHAR2(50)    NULL
);

-- 19. 주문 마스터
CREATE TABLE ORDERS (
    ITEMS_ID            VARCHAR2(20)    NOT NULL,       -- PK (주문번호)
    MEMBERIDX           NUMBER          NOT NULL,       -- FK (MEMBER1)
    ORDER_DATE          DATE            DEFAULT SYSDATE,
    TOTAL_AMOUNT        NUMBER          NULL,
    REAL_TOTAL_AMOUNT   NUMBER          NULL,
    POINT               NUMBER          NULL,
    STATUS              VARCHAR2(50)    DEFAULT '구매확정',
    DELIVERY_NUMBER     NUMBER          NULL
);

-- 20. 주문 상세
CREATE TABLE ORDER_ITEMS (
    ITEM_ID         NUMBER          NOT NULL,           -- PK
    ORDER_ID        VARCHAR2(50)    NOT NULL,           -- FK (ORDERS.ITEMS_ID)
    OPT_ID          NUMBER          NOT NULL,           -- FK (PD_SIZE)
    COUNT           NUMBER          DEFAULT 1,
    PRICE           NUMBER          NULL
);

-- 21. 결제 정보
CREATE TABLE PAYMENTS (
    PAY_ID          NUMBER          NOT NULL,           -- PK
    ORDER_ID        VARCHAR2(20)    NOT NULL,
    PAY_METHOD      VARCHAR2(20)    NULL,
    PAY_AMOUNT      NUMBER          NULL,
    PG_TID          VARCHAR2(100)   NULL,
    PAY_STATUS      VARCHAR2(20)    NULL,
    CARD_NAME       VARCHAR2(50)    NULL,
    CARD_NUM        VARCHAR2(50)    NULL
);

-- 22. 교환/반품
CREATE TABLE CLAIMS (
    CLAIM_ID        NUMBER          NOT NULL,           -- PK
    ORDER_ID        VARCHAR2(20)    NOT NULL,
    TYPE            VARCHAR2(10)    NULL,
    REASON          VARCHAR2(1000)  NULL,
    REQ_DATE        DATE            NULL,
    PROCESS_DATE    DATE            NULL,
    STATUS          VARCHAR2(20)    NULL
);

-- 23. 장바구니
CREATE TABLE CART (
    CART_ID         NUMBER          NOT NULL,           -- PK
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    PROD_ID         NUMBER          NOT NULL,           -- FK (PRODUCTS)
    OPT_ID          NUMBER          NOT NULL,
    QUANTITY        NUMBER          NULL,
    REG_DATE        DATE            NULL
);

-- 24. 위시리스트
CREATE TABLE WISHLIST (
    WISH_ID         NUMBER          NOT NULL,           -- PK
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    PROD_ID         NUMBER          NOT NULL,           -- FK (PRODUCTS)
    ISLIKED         NUMBER(1)       NULL
);

-- 25. 할인 정책
CREATE TABLE DISCOUNTS (
    DISCOUNT_ID     NUMBER          NOT NULL,           -- PK
    DISCOUNT_NAME   VARCHAR2(100)   NULL,
    TYPE            VARCHAR2(10)    NULL,
    VAL             NUMBER          NULL,
    TARGET_TYPE     VARCHAR2(20)    NULL,
    TARGET_ID       NUMBER          NULL,
    START_DATE      DATE            NULL,
    END_DATE        DATE            NULL,
    IS_ACTIVE       NUMBER          NULL
);

-- 26. 주문 할인 적용
CREATE TABLE ORDER_DISCOUNTS (
    OD_ID           NUMBER          NOT NULL,           -- PK
    DISCOUNT_ID     NUMBER          NOT NULL,           -- FK (DISCOUNTS)
    ORDER_ID        VARCHAR2(20)    NOT NULL,
    ITEM_ID         NUMBER          NOT NULL,
    DISCOUNT_AMT    NUMBER          NULL
);

-- 27. 포인트 내역
CREATE TABLE POINT_MEMBER (
    PM_ID           NUMBER          NOT NULL,           -- PK
    MEMBERIDX       NUMBER          NOT NULL,           -- FK (MEMBER1)
    ORDER_ID        VARCHAR2(20)    NULL,
    REASON          VARCHAR2(40)    NULL,
    POINT_AMOUNT    NUMBER          NULL,
    REM_POINT       NUMBER          NULL,
    REG_DATE        DATE            NULL
);

-- 28. 리뷰
CREATE TABLE REVIEWS (
    ITEM_ID         NUMBER          NOT NULL,           -- PK, FK (ORDER_ITEMS)
    RATING          NUMBER          DEFAULT 5,
    CONTENT         VARCHAR2(2000)  NULL,
    IMG_URL         VARCHAR2(2000)  NULL,
    REG_DATE        DATE            DEFAULT SYSDATE
);

/* -- -----------------------------------------------------------------
   3. PK 설정 (Primary Key Constraints)
-- ----------------------------------------------------------------- */
ALTER TABLE ADDRESS         ADD CONSTRAINT PK_ADDRESS           PRIMARY KEY (ADDR_ID);
ALTER TABLE BOARD           ADD CONSTRAINT PK_BOARD             PRIMARY KEY (NUM);
ALTER TABLE BOARD_POSTS     ADD CONSTRAINT PK_BOARD_POSTS       PRIMARY KEY (POST_ID);
ALTER TABLE CART            ADD CONSTRAINT PK_CART              PRIMARY KEY (CART_ID);
ALTER TABLE CATEGORY        ADD CONSTRAINT PK_CATEGORY          PRIMARY KEY (CATE_CODE);
ALTER TABLE CLAIMS          ADD CONSTRAINT PK_CLAIMS            PRIMARY KEY (CLAIM_ID);
ALTER TABLE DISCOUNTS       ADD CONSTRAINT PK_DISCOUNTS         PRIMARY KEY (DISCOUNT_ID);
ALTER TABLE FAQ             ADD CONSTRAINT PK_FAQ               PRIMARY KEY (NUM);
ALTER TABLE INQUIRY         ADD CONSTRAINT PK_INQUIRY           PRIMARY KEY (ID);
ALTER TABLE LOGIN_HISTORY   ADD CONSTRAINT PK_LOGIN_HISTORY     PRIMARY KEY (LOG_ID);
ALTER TABLE MEMBER1         ADD CONSTRAINT PK_MEMBER1           PRIMARY KEY (MEMBERIDX);
ALTER TABLE MEMBER2         ADD CONSTRAINT PK_MEMBER2           PRIMARY KEY (MEMBERIDX);
ALTER TABLE MEMBER3         ADD CONSTRAINT PK_MEMBER3           PRIMARY KEY (MEMBERIDX);
ALTER TABLE NOTICE          ADD CONSTRAINT PK_NOTICE            PRIMARY KEY (NUM);
ALTER TABLE ORDERS          ADD CONSTRAINT PK_ORDERS            PRIMARY KEY (ITEMS_ID);
ALTER TABLE ORDER_DISCOUNTS ADD CONSTRAINT PK_ORDER_DISCOUNTS   PRIMARY KEY (OD_ID);
ALTER TABLE ORDER_ITEMS     ADD CONSTRAINT PK_ORDER_ITEMS       PRIMARY KEY (ITEM_ID);
ALTER TABLE PAYMENTS        ADD CONSTRAINT PK_PAYMENTS          PRIMARY KEY (PAY_ID);
ALTER TABLE PD_SIZE         ADD CONSTRAINT PK_PD_SIZE           PRIMARY KEY (OPT_ID);
ALTER TABLE POINT_MEMBER    ADD CONSTRAINT PK_POINT_MEMBER      PRIMARY KEY (PM_ID);
ALTER TABLE PRODUCTS        ADD CONSTRAINT PK_PRODUCTS          PRIMARY KEY (PROD_ID);
ALTER TABLE PRODUCT_IMG     ADD CONSTRAINT PK_PRODUCT_IMG       PRIMARY KEY (IMG_ID);
ALTER TABLE QNA_ADMIN       ADD CONSTRAINT PK_QNA_ADMIN         PRIMARY KEY (QNA_ID);
ALTER TABLE QNA_ANSWER      ADD CONSTRAINT PK_QNA_ANSWER        PRIMARY KEY (QNA_ID);
ALTER TABLE REVIEWS         ADD CONSTRAINT PK_REVIEWS           PRIMARY KEY (ITEM_ID);
ALTER TABLE SHIPMENTS       ADD CONSTRAINT PK_SHIPMENTS         PRIMARY KEY (DELIVERY_NUMBER);
ALTER TABLE STOCK_LOGS      ADD CONSTRAINT PK_STOCK_LOGS        PRIMARY KEY (LOG_ID);
ALTER TABLE WISHLIST        ADD CONSTRAINT PK_WISHLIST          PRIMARY KEY (WISH_ID);

/* -- -----------------------------------------------------------------
   4. FK 설정 (Foreign Key Constraints)
-- ----------------------------------------------------------------- */

-- Member Relationships
ALTER TABLE MEMBER2         ADD CONSTRAINT FK_MEMBER1_TO_MEMBER2  FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE MEMBER3         ADD CONSTRAINT FK_MEMBER1_TO_MEMBER3  FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE ADDRESS         ADD CONSTRAINT FK_MEMBER1_TO_ADDRESS  FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE LOGIN_HISTORY   ADD CONSTRAINT FK_MEMBER1_TO_LOGIN    FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE BOARD           ADD CONSTRAINT FK_MEMBER1_TO_BOARD    FOREIGN KEY (USERID)    REFERENCES MEMBER1(USERID);
ALTER TABLE BOARD_POSTS     ADD CONSTRAINT FK_MEMBER1_TO_POSTS    FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE QNA_ANSWER      ADD CONSTRAINT FK_MEMBER1_TO_QNA      FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE QNA_ADMIN       ADD CONSTRAINT FK_MEMBER1_TO_QNAADMIN FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE ORDERS          ADD CONSTRAINT FK_MEMBER1_TO_ORDERS   FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE CART            ADD CONSTRAINT FK_MEMBER1_TO_CART     FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE WISHLIST        ADD CONSTRAINT FK_MEMBER1_TO_WISHLIST FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);
ALTER TABLE POINT_MEMBER    ADD CONSTRAINT FK_MEMBER1_TO_POINT    FOREIGN KEY (MEMBERIDX) REFERENCES MEMBER1(MEMBERIDX);

-- QnA Relationships
ALTER TABLE QNA_ADMIN       ADD CONSTRAINT FK_QNA_TO_QNAADMIN     FOREIGN KEY (QNA_ID)    REFERENCES QNA_ANSWER(QNA_ID);

-- Category & Product Relationships
ALTER TABLE CATEGORY        ADD CONSTRAINT FK_CATEGORY_TO_CATEGORY FOREIGN KEY (CATE_PARENT) REFERENCES CATEGORY(CATE_CODE);
ALTER TABLE PRODUCTS        ADD CONSTRAINT FK_CATEGORY_TO_PRODUCTS FOREIGN KEY (CATE_CODE)   REFERENCES CATEGORY(CATE_CODE);
ALTER TABLE PD_SIZE         ADD CONSTRAINT FK_SIZE_PRODUCTS        FOREIGN KEY (PROD_ID)     REFERENCES PRODUCTS(PROD_ID) ON DELETE CASCADE;
ALTER TABLE PRODUCT_IMG     ADD CONSTRAINT FK_PRODUCTS_TO_IMG      FOREIGN KEY (PROD_ID)     REFERENCES PRODUCTS(PROD_ID);
ALTER TABLE STOCK_LOGS      ADD CONSTRAINT FK_PRODUCTS_TO_STOCK    FOREIGN KEY (PROD_ID)     REFERENCES PRODUCTS(PROD_ID);
ALTER TABLE STOCK_LOGS      ADD CONSTRAINT FK_SIZE_TO_STOCK        FOREIGN KEY (OPT_ID)      REFERENCES PD_SIZE(OPT_ID);

-- Order & Shipping Relationships
ALTER TABLE SHIPMENTS       ADD CONSTRAINT FK_ADDRESS_TO_SHIPMENTS FOREIGN KEY (ADDR_ID)     REFERENCES ADDRESS(ADDR_ID);
ALTER TABLE ORDERS          ADD CONSTRAINT FK_SHIPMENTS_TO_ORDERS  FOREIGN KEY (DELIVERY_NUMBER) REFERENCES SHIPMENTS(DELIVERY_NUMBER);

ALTER TABLE ORDER_ITEMS     ADD CONSTRAINT FK_ITEMS_ORDER          FOREIGN KEY (ORDER_ID)    REFERENCES ORDERS(ITEMS_ID) ON DELETE CASCADE;
ALTER TABLE ORDER_ITEMS     ADD CONSTRAINT FK_ITEMS_OPT            FOREIGN KEY (OPT_ID)      REFERENCES PD_SIZE(OPT_ID);

-- Payment, Claims, Cart & Wishlist Relationships
ALTER TABLE PAYMENTS        ADD CONSTRAINT FK_ORDERS_TO_PAYMENTS   FOREIGN KEY (ORDER_ID)    REFERENCES ORDERS(ITEMS_ID);
ALTER TABLE CLAIMS          ADD CONSTRAINT FK_ORDERS_TO_CLAIMS     FOREIGN KEY (ORDER_ID)    REFERENCES ORDERS(ITEMS_ID);
ALTER TABLE CART            ADD CONSTRAINT FK_PRODUCTS_TO_CART     FOREIGN KEY (PROD_ID)     REFERENCES PRODUCTS(PROD_ID);
ALTER TABLE CART            ADD CONSTRAINT FK_SIZE_TO_CART         FOREIGN KEY (OPT_ID)      REFERENCES PD_SIZE(OPT_ID);
ALTER TABLE WISHLIST        ADD CONSTRAINT FK_PRODUCTS_TO_WISHLIST FOREIGN KEY (PROD_ID)     REFERENCES PRODUCTS(PROD_ID);

-- Discount & Point Relationships
ALTER TABLE ORDER_DISCOUNTS ADD CONSTRAINT FK_DISCOUNTS_TO_OD      FOREIGN KEY (DISCOUNT_ID) REFERENCES DISCOUNTS(DISCOUNT_ID);
ALTER TABLE ORDER_DISCOUNTS ADD CONSTRAINT FK_OD_TO_ORDERS         FOREIGN KEY (ORDER_ID)    REFERENCES ORDERS(ITEMS_ID);
ALTER TABLE ORDER_DISCOUNTS ADD CONSTRAINT FK_ITEMS_TO_OD          FOREIGN KEY (ITEM_ID)     REFERENCES ORDER_ITEMS(ITEM_ID);
ALTER TABLE POINT_MEMBER    ADD CONSTRAINT FK_ORDERS_TO_POINT      FOREIGN KEY (ORDER_ID)    REFERENCES ORDERS(ITEMS_ID);

-- Review Relationships
ALTER TABLE REVIEWS         ADD CONSTRAINT CK_REVIEWS_RATING       CHECK (RATING BETWEEN 0 AND 5);
ALTER TABLE REVIEWS         ADD CONSTRAINT FK_REVIEWS_ITEM         FOREIGN KEY (ITEM_ID)     REFERENCES ORDER_ITEMS(ITEM_ID) ON DELETE CASCADE;

/* -- -----------------------------------------------------------------
   5. 코멘트(COMMENT) 설정
-- ----------------------------------------------------------------- */
COMMENT ON COLUMN MEMBER1.USERID IS '로그인 ID';
COMMENT ON COLUMN MEMBER1.USERPWD IS '비밀번호';
COMMENT ON COLUMN MEMBER1.USERLEVEL IS '등급';
COMMENT ON COLUMN MEMBER1.ENABLED IS '계정 상태';
COMMENT ON COLUMN MEMBER1.MODIFY_DATE IS '정보 수정일';
COMMENT ON COLUMN MEMBER1.BIRTH IS '생일';
COMMENT ON COLUMN MEMBER1.GENDER IS '성별 (0:남, 1:여)';

COMMENT ON COLUMN ADDRESS.ADDR_NAME IS '배송지명 (예: 우리집, 회사)';
COMMENT ON COLUMN ADDRESS.RECEIVER_NAME IS '받는사람 이름';
COMMENT ON COLUMN ADDRESS.RECEIVER_TEL IS '받는사람 전화번호';
COMMENT ON COLUMN ADDRESS.ZIP_CODE IS '우편번호';
COMMENT ON COLUMN ADDRESS.ISBASIC IS '기본 배송지 여부';

COMMENT ON COLUMN BOARD_POSTS.BOARD_TYPE IS 'notice(공지), free(자유) 등 구분';
COMMENT ON COLUMN BOARD_POSTS.ISFIXED IS '상단 고정 여부';

COMMENT ON COLUMN CLAIMS.TYPE IS 'EXCH(교환), RETURN(반품)';
COMMENT ON COLUMN CLAIMS.REASON IS '사유';

COMMENT ON COLUMN DISCOUNTS.TYPE IS 'COUPON, 마일리지 등';
COMMENT ON COLUMN DISCOUNTS.VAL IS '할인율(%) 또는 금액(원)';

COMMENT ON COLUMN ORDERS.STATUS IS '결제완료, 배송중, 구매확정 등';

COMMENT ON COLUMN PAYMENTS.PAY_METHOD IS '결제수단';
COMMENT ON COLUMN PAYMENTS.PAY_AMOUNT IS '거래 금액';
COMMENT ON COLUMN PAYMENTS.PG_TID IS 'PG사 거래 고유번호';
COMMENT ON COLUMN PAYMENTS.PAY_STATUS IS '거래 상태';

COMMENT ON COLUMN POINT_MEMBER.POINT_AMOUNT IS '변동액';
COMMENT ON COLUMN POINT_MEMBER.REM_POINT IS '잔여 포인트';

COMMENT ON COLUMN PRODUCTS.PROD_DESC IS '상품 상세 설명 (CLOB)';
COMMENT ON COLUMN PRODUCTS.IS_DISPLAYED IS '진열 여부';
COMMENT ON COLUMN PRODUCTS.PROD_DATE IS '제조일';
COMMENT ON COLUMN PRODUCTS.SHIPPED_DATE IS '입고일';

COMMENT ON COLUMN STOCK_LOGS.CHANGE_TYPE IS 'IN(입고), OUT(출고/판매)';
COMMENT ON COLUMN STOCK_LOGS.PROD_STOCK IS '변경 후 잔여 재고';

COMMENT ON COLUMN QNA_ANSWER.TYPE IS '질문 유형';
COMMENT ON COLUMN QNA_ANSWER.ANSWER_DATE IS '답변 완료일';

COMMIT;